<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	  th:replace="layout :: layout(~{::title}, ~{::body})">
	 
<head>
    <meta charset="UTF-8">
    <title>ë‚´ ì •ë³´</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
<div th:fragment="body">
<script th:inline="javascript">
    function enableEdit() {
        document.querySelectorAll('.editable').forEach(function(input) {
            input.removeAttribute('readonly');
        });
        document.getElementById('saveBtn').style.display = 'inline-block';
		document.getElementById('cancelBtn').style.display = 'inline-block';
		document.getElementById('editBtn').style.display = 'none';
		document.getElementById('deleteBtn').style.display = 'none';
    }
	
	// ìˆ˜ì • ì·¨ì†Œ
	function cancelEdit() {
	    window.location.href = '/member/myInfo'; // ì„œë²„ì—ì„œ ë‹¤ì‹œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
	}

	// íšŒì› íƒˆí‡´
	function removeAccount() {
	    if(confirm('ì •ë§ íšŒì› íƒˆí‡´ë¥¼ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
	        window.location.href = '/member/removeAccount'; // íƒˆí‡´ í›„ Controller ì²˜ë¦¬
	    }
	}
</script>		
<div class="container mt-5">
    <h2>ë‚´ ì •ë³´</h2>
	<form th:action="@{/admin/member/modify}" method="post" th:object="${member}">
	    <div sec:csrf /> <!-- ğŸ”¹ ì—¬ê¸°ì„œ CSRF í† í° ìë™ ì‚½ì… -->

	    <div class="mb-3">
	        <label for="memId" class="form-label">ì•„ì´ë””</label>
	        <input type="text" id="memId" th:field="*{memId}" class="form-control" readonly >
	    </div>
		<div class="mb-3">
		    <label for="pwd" class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
		    <input type="password" id="pwd" th:field="*{pwd}" class="form-control editable" placeholder="ë³€ê²½í•  ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"  readonly>
		</div>

	    <div class="mb-3">
	        <label for="name" class="form-label">ì´ë¦„</label>
	        <input type="text" id="name" th:field="*{name}" class="form-control editable" readonly>
	    </div>

	    <div class="mb-3">
	        <label for="email" class="form-label">ì´ë©”ì¼</label>
	        <input type="email" id="email" th:field="*{email}" class="form-control editable" readonly>
	    </div>

	    <div class="mb-3">
	        <label for="phone" class="form-label">ë‹‰ë„¤ì„</label>
	        <input type="text" id="nickname" th:field="*{nickname}" class="form-control editable" readonly>
	    </div>
		<div class="mb-3">
	        <label for="phone" class="form-label">ìµœì´ˆê°€ì…ì¼</label>
	        <input type="text" id="createdAt" th:field="*{createdAt}" class="form-control non-editable" readonly>
		</div>
		<div class="mb-3">
	        <label for="phone" class="form-label">ìµœì¢…ìˆ˜ì •ì¼</label>
	        <input type="text" id="updatedAt" th:field="*{updatedAt}" class="form-control non-editable" readonly>
		</div>

	    <button type="button" id="editBtn" class="btn btn-primary" onclick="enableEdit()">ìˆ˜ì •í•˜ê¸°</button>
		<button type="button" id="deleteBtn" class="btn btn-danger" onclick="removeAccount()">íƒˆí‡´í•˜ê¸°</button>
	    <button type="submit" id="saveBtn" class="btn btn-success" style="display:none;">ìˆ˜ì • ìµœì¢… ë°˜ì˜</button>
		<button type="button" id="cancelBtn" class="btn btn-cancel" onclick="cancelEdit()"  style="display:none;">ì·¨ì†Œ</button>
	</form>

</div>
</div>
</body>
</html>
