<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.springboot.ckb.common.security.repository.SecurityMemberRepository">
	<resultMap id="memResult" type="member">
		<result property="memId" column="memId" />
        <result property="pwd" column="pwd" />
        <result property="name" column="name" />
        <result property="email" column="email" />
        <result property="joinDate" column="joinDate" />
         <result property="role" column="role"/>
	</resultMap> 
	
	<select id="selectAllMemberList" resultMap="memResult">
      <![CDATA[
		SELECT memId, pwd, name, email, joinDate
		FROM t_member3
		ORDER BY joinDate DESC
      ]]>
	</select>


	<select id="findByEmail" parameterType="String" resultMap="memResult">
      <![CDATA[
         SELECT * FROM t_member3
         WHERE 
         email = #{email}	
      ]]>
	</select>
	
	<select id="findByMemId"  resultType="member"   parameterType="String" >
	<![CDATA[
		SELECT * FROM t_member3	
		WHERE memId=#{memId} 
	]]>
  </select>
    <insert id="insertMember" parameterType="member" useGeneratedKeys="true">
	    INSERT INTO t_member3 (
			    memId, 
	    		PWD, 
	    		EMAIL, 
	    		NAME, 
	    		NICKNAME,
	    		JOINDATE,
	    		ROLE
	    		)
	    VALUES (#{memId}, 
	    		#{pwd}, 
	    		#{email}, 
	    		#{name},
	    		#{nickname}, 
	    		SYSDATE,
	    		#{role}
	    		)
  </insert>
    <update id="updateMember" parameterType="member">
	    UPDATE t_member3 
	    SET
	      EMAIL = #{email},
	      PWD = #{pwd},
	      NAME = #{name}
	    WHERE memId = #{memId}
  </update>

</mapper>